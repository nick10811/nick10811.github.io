---
layout: post
title: How to install Samba on CentOS ?
date: '2016-06-01T21:03:00.001+08:00'
author: Nick Yang
tags:
- Linux
- Samba
modified_time: '2017-06-28T16:15:09.243+08:00'
blogger_id: tag:blogger.com,1999:blog-7236887784802460774.post-6326346230826555467
blogger_orig_url: https://imjustaprogrammer.blogspot.com/2016/06/how-to-install-samba-on-centos.html
---

Is this article teach you do basic samba? Oh~ no. This article introduces the server of samba. This server can help you to share files between Linux and Windows. The difference with FTP server is you can revise file directly on your PC. So let me show you how to install Samba server on Cent OS.<br /><br /><ul><li>Install samba</li><pre class="brush: shell; gutter: false;">[nick1811@centos-6 ~]$ sudo yum install -y samba<br /></pre><li>To allow folder access</li><pre class="brush: bash; gutter: false;">[nick1811@centos-6 ~]$ sudo vim /etc/selinux/config<br /></pre><pre class="brush: bash;"># This file controls the state of SELinux on the system.<br /># SELINUX= can take one of these three values:<br />#     enforcing - SELinux security policy is enforced.<br />#     permissive - SELinux prints warnings instead of enforcing.<br />#     disabled - No SELinux policy is loaded.<br />SELINUX=disabled<br /></pre><li>To add samba user (<b>Hint:</b> Only Linux users can be added to samba user)</li><pre class="brush: bash; gutter: false;">[nick1811@CentOS-6 ~]$ sudo pdbedit -a -u nick1811<br />new password:<br />retype new password:<br /></pre><li>Add user with password</li><pre class="brush: bash; gutter: false;">[nick1811@CentOS-6 ~]$ sudo printf "********\n********\n" | sudo pdbedit -t -a -u nick1811<br />Unix username:        nick1811<br /></pre><li>To delete samba user</li><pre class="brush: bash; gutter: false;">[nick1811@centos-6 ~]$ sudo pdbedit -x -u nick1811<br /></pre><li>To check samba users</li><pre class="brush: bash; gutter: false;">[nick1811@CentOS-6 ~]$ sudo pdbedit -L<br />nick1811:500:nick1811<br /></pre><li>To enable samba on starting OS</li><pre class="brush: bash; gutter: false;">[nick1811@centos-6 ~]$ sudo chkconfig smb on<br /></pre><li>Settings for creating shares by non-root users</li><ul><li>create samba shares folder</li><pre class="brush: bash; gutter: false;">[nick1811@CentOS-6 ~]$ sudo mkdir -p /usr/local/samba/lib/usershares<br />[nick1811@CentOS-6 ~]$ sudo chown root:nick1811 /usr/local/samba/lib/usershares<br />[nick1811@CentOS-6 ~]$ sudo chmod 1770 /usr/local/samba/lib/usershares<br />[nick1811@CentOS-6 ~]$ sudo chcon -R -t samba_share_t /usr/local/samba/lib/usershares<br /></pre><li>set up your smb.conf by adding to the [global] section</li><pre class="brush: bash; gutter: false;">[nick1811@CentOS-6 ~]$ sudo vim /etc/samba/smb.conf<br /></pre><pre class="brush: bash;">#======================= Global Settings =====================================<br /><br />[global]<br />wins support = yes<br />usershare path = /usr/local/samba/lib/usershares<br />usershare max shares = 100<br />usershare allow guests = true<br />usershare owner only = false<br /># Samba works on NFS-Shares<br />admin users = nick1811<br />strict locking = no<br />oplocks = no<br />acl check permissions = false<br /><br /><br /></pre></ul><li>Now you can create folder shares</li><ul><li>To share samba folder</li><pre class="brush: bash; gutter: false;">[nick1811@centos-6 ~]$ net usershare add nick_samba /home/nick1811/samba/ "nick's samba folder" Everyone:F guest_ok=y<br /></pre><li>To unshare samba folder</li><pre class="brush: bash; gutter: false;">[nick1811@centos-6 ~]$ net usershare delete nick_samba<br /></pre></ul><li>To enable/disable samba service</li><pre class="brush: bash; gutter: false;">[nick1811@centos-6 ~]$ sudo service smb start<br /></pre><pre class="brush: bash; gutter: false;">[nick1811@centos-6 ~]$ sudo service smb stop<br /></pre><pre class="brush: bash; gutter: false;">[nick1811@centos-6 ~]$ sudo service smb restart<br /></pre><li>Finally, remember to set iptables for samba</li><pre class="brush: bash; gutter: false;">[nick1811@CentOS-6 ~]$ sudo vim /etc/sysconfig/iptables<br /></pre><pre class="brush: bash;"># SAMBA/CIFS<br />-A INPUT -m state --state NEW -m tcp -p tcp --dport 139 -j ACCEPT<br />-A INPUT -m state --state NEW -m tcp -p tcp --dport 445 -j ACCEPT<br /></pre><pre class="brush: bash; gutter: false;">[nick1811@CentOS-6 ~]$ sudo service iptables restart<br />iptables: Setting chains to policy ACCEPT: filter          [  OK  ]<br />iptables: Flushing firewall rules:                         [  OK  ]<br />iptables: Unloading modules:                               [  OK  ]<br />iptables: Applying firewall rules:                         [  OK  ]<br /><br /></pre></ul><div><br /></div><div><b>References:</b>&nbsp;</div><div><ul><li><a href="http://ubuntuforums.org/showthread.php?t=1894262">http://ubuntuforums.org/showthread.php?t=1894262</a></li><li><a href="http://www.samba.org/samba/docs/man/manpages-3/net.8.html">http://www.samba.org/samba/docs/man/manpages-3/net.8.html</a></li><li><a href="http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html">http://www.samba.org/samba/docs/man/manpages-3/smb.conf.5.html</a></li></ul></div><div><br /></div>