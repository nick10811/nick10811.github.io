---
layout: post
title: Install NFS server on CentOS
date: '2017-07-18T15:33:00.000+08:00'
author: Nick Yang
tags:
- Linux
- NFS
modified_time: '2017-07-18T15:33:15.542+08:00'
blogger_id: tag:blogger.com,1999:blog-7236887784802460774.post-3980730028585564358
blogger_orig_url: https://imjustaprogrammer.blogspot.com/2017/07/install-nfs-server-on-centos.html
---

<b>N</b>etwork <b>F</b>ile<b>S</b>ystem (NFS) is created by Sun company. It provide you a service to share files between different machine via network. <a href="http://imjustaprogrammer.blogspot.tw/2016/06/how-to-install-samba-on-centos.html">It is similar with Samba which I mentioned before.</a> But the transport speed is faster than Samba. Because it does not need user to type account and password. The server has white list to allow legal IP to login to access files directly. <br><br/>Install server is very easy. We just use <b><I>yum</I></b> command to find necessary libraries and install automatically. <pre class="brush: bash; gutter: false;"><br />[nick1811@NAS ~]$ sudo yum install nfs-utils nfs-utils-lib<br /></pre>Create white list. We allows all IP in subnetwork(192.168.0.*). And all users have access right for read and write. <pre class="brush: bash; gutter: false;"><br />[nick1811@NAS ~]$ vim /etc/exports<br />/home/nick1811/Shared_Folder 192.168.0.1/24(rw)<br /></pre>Run several startup scripts for the NFS server <pre class="brush: bash; gutter: false;"><br />[nick1811@NAS ~]$ sudo service rpcbind start<br />[nick1811@NAS ~]$ sudo service nfs start<br /></pre>Finally, remember turn on the port in iptables. <pre class="brush: bash; gutter: false;"><br />[nick1811@NAS ~]$ sudo vim /etc/sysconfig/iptables<br /></pre><pre class="brush: bash;"><br /># NFS<br />-A INPUT -m state --state NEW -m tcp -p tcp --dport 2049 -j ACCEPT<br /></pre><pre class="brush: bash; gutter: false;"><br />[nick1811@NAS ~]$ sudo service iptables restart<br />iptables: Setting chains to policy ACCEPT: filter          [  OK  ]<br />iptables: Flushing firewall rules:                         [  OK  ]<br />iptables: Unloading modules:                               [  OK  ]<br />iptables: Applying firewall rules:       <br /></pre><br/><br/>Although we have been set complete. But how to check all setting are correctly? To reach this purpose. I choose other CentOS and install NFS client to do it. <br/><br/>First, we also need to install necessary libraries. <pre class="brush: bash; gutter: false;"><br />[nick1811@Client ~]$ sudo yum install nfs-utils nfs-utils-lib<br /></pre>Second, we use <b><I>showmount</I></b> command to check we can see the shared folder. <pre class="brush: bash; gutter: false;"><br />[nick1811@Client ~]$ showmount -e 192.168.0.1<br />Export list for 192.168.0.1:<br />/home/nick1811/Shared_Folder  192.168.0.1/24<br /></pre>Finally, we mount shared folder to local folder which is we created. <pre class="brush: bash; gutter: false;"><br />[nick1811@Client ~]$ mount 192.168.0.1:/home/nick1811/Shared_Folder /mnt/nfs<br /></pre>When we can put files to /mnt/nfs and we can see files on the server side, we successfully setup NFS server. <br/><br/>Reference: <a href="http://linux.vbird.org/linux_server/0330nfs.php">http://linux.vbird.org/linux_server/0330nfs.php</a>